# Promise

- [Promise](#promise)
  - [基本概念](#基本概念)
  - [基本使用](#基本使用)
  - [读取文件](#读取文件)
  - [catch()](#catch)

## 基本概念

Promise对象有以下两个特点。

（1）对象的状态不受外界影响。`Promise`对象代表一个异步操作，有三种状态：`pending`（进行中）、`fulfilled`（已成功）和`rejected`（已失败）。只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。这也是`Promise`这个名字的由来，它的英语意思就是“承诺”，表示其他手段无法改变。

（2）一旦状态改变，就不会再变，任何时候都可以得到这个结果。`Promise`对象的状态改变，只有两种可能：从`pending`变为`fulfilled`和从`pending`变为`rejected`。只要这两种情况发生，状态就凝固了，不会再变了，会一直保持这个结果，这时就称为 resolved（已定型）

## 基本使用

```js
const p = new Promise((resolve, reject) => {
setTimeout(() => {
    // 成功
    // let data = '数据库中的用户数据';
    // resolve(data);
    // 失败
    let error = "就让你失败"
    reject(error)
}, 1000);
})

p.then(value => console.log("读取的数据:" + value),
error => console.error("读取失败原因: " + error))
```

## 读取文件

```js
const fs = require('fs');
const p = new Promise(function(resolve, reject){
    fs.readFile("./resources/为学.md", (err, data)=>{
        //判断如果失败
        if(err) reject(err);
        //如果成功
        resolve(data);
    });
});

p.then(function(value){
    console.log(value.toString());
}, function(reason){
    console.log("读取失败!!");
});
```

## catch()

```js
const p = new Promise(function(resolve, reject){
    fs.readFile("./resources/为学.m", (err, data)=>{
        //判断如果失败
        if(err) reject(err);
        //如果成功
        resolve(data);
    });
});

p.catch(()=>console.log("shit,出错了"))
```
