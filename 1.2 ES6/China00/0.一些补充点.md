# 补充点

- [补充点](#补充点)
  - [事件循环](#事件循环)
  - [宏任务微任务](#宏任务微任务)
  - [剩余操作符（rest operator）](#剩余操作符rest-operator)

## 事件循环

事件循环 的概念非常简单。它是一个在 JavaScript 引擎**等待任务，执行任务和进入休眠状态等待更多任务**这几个状态之间转换的无限循环。

引擎的一般算法：

1. 当有任务时：
   1. 从最先进入的任务开始执行。
2. 休眠直到出现任务，然后转到第 1 步。

当我们浏览一个网页时就是上述这种形式。JavaScript 引擎大多数时候不执行任何操作，它仅在脚本/处理程序/事件激活时执行。

任务示例：

- 当外部脚本`<script src="...">`加载完成时，任务就是执行它。
- 当用户移动鼠标时，任务就是派生出 mousemove 事件和执行处理程序。
- 当安排的（scheduled）setTimeout 时间到达时，任务就是执行其回调。

……诸如此类。
设置任务 —— 引擎处理它们 —— 然后等待更多任务（即休眠，几乎不消耗 CPU 资源）。

一个任务到来时，引擎可能正处于繁忙状态，那么这个任务就会被排入队列。

多个任务组成了一个队列，即所谓的“宏任务队列”

## 宏任务微任务

- 微任务仅来自于我们的代码。它们通常是由 promise 创建的：对`.then/catch/finally`处理程序的执行会成为微任务。微任务也被用于 await 的“幕后”，因为它是 promise 处理的另一种形式。

还有一个特殊的函数 queueMicrotask(func)，它对 func 进行排队，以在微任务队列中执行。

- 每个宏任务之后，引擎会**立即执行微任务队列中的所有任务**，然后再执行其他的宏任务，或渲染，或进行其他任何操作。

## 剩余操作符（rest operator）

- 在JavaScript中，"..."（三个连续的点号）被称为剩余操作符（rest operator）或扩展操作符（spread operator），取决于它在函数参数中的使用方式。

- 在函数参数中，"..."用于表示剩余参数（rest parameters）。这允许函数接受可变数量的参数，**并将它们作为数组保存在剩余参数中**。在你提供的示例中，函数的参数被声明为" ...args"，它表示接受任意数量的参数，并将它们保存在名为"args"的数组中。

```js
function sum(...args) {
  let total = 0;
  for (let num of args) {
    total += num;
  }
  return total;
}

console.log(sum(1, 2, 3)); // 输出：6
console.log(sum(4, 5, 6, 7)); // 输出：22
```
