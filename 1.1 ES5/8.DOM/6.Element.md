# Element

- [Element](#element)
  - [1.Overview](#1overview)
  - [2.instance attributes](#2instance-attributes)
    - [2.1 Related attributes of element characteristics](#21-related-attributes-of-element-characteristics)
    - [2.2 Related attributes of element state](#22-related-attributes-of-element-state)
    - [2.3 Element.attributes](#23-elementattributes)
    - [2.4 Element.className, Element.classList](#24-elementclassname-elementclasslist)
    - [2.5 Element.dataset](#25-elementdataset)
    - [2.6 Element.innerHTML](#26-elementinnerhtml)
    - [2.7 Element.outerHTML](#27-elementouterhtml)
    - [2.8 Element.clientHeight, Element.clientWidth](#28-elementclientheight-elementclientwidth)
    - [2.9 Element.clientLeft, Element.clientTop](#29-elementclientleft-elementclienttop)
    - [2.10 Element.scrollHeight, Element.scrollWidth](#210-elementscrollheight-elementscrollwidth)
    - [2.11 Element.scrollLeft, Element.scrollTop](#211-elementscrollleft-elementscrolltop)

## 1.Overview

The <code style="color:#ea4335">Element</code> node object corresponds to the HTML element of the web page. Each HTML element will be transformed into an <code style="color:#ea4335">Element</code> node object (hereinafter referred to as element node) on the DOM tree.

```js
var p = document.querySelector('p');
p.nodeName // "P"
p.nodeType // 1
```

The <code style="color:#ea4335">Element</code> object inherits the <code style="color:#ea4335">Node</code> interface. Therefore, the attributes and methods of <code style="color:#ea4335">Node</code> exist in the <code style="color:#ea4335">Element</code> object.

In addition, the element nodes corresponding to different HTML elements are different. The browser use different constructors to generate different element nodes. Therefore, element nodes isn't a object, but many kinds of object, these objects in addtion to inherit the attributes and methods of the Element object, these objects also have their own unique attributes and methods.

## 2.instance attributes

### 2.1 Related attributes of element characteristics

1. Element.id

    <code style="color:#ea4335">Element.id</code> attribute returns the <code style="color:#ea4335">id</code> attribute of specified element, which can be read and written.

    Note that the value of the <code style="color:#ea4335">id</code> is case sensitive.

    ```js
    // HTML 代码为 <p id="foo">
    var p = document.querySelector('p');
    p.id // "foo"
    ```

2. Element.tagName

    <code style="color:#ea4335">Element.tagName</code> attribute returns the uppercase label name of specified element which is equal to the value of the <code style="color:#ea4335">nodeName</code> attribute.

    ```js
    // HTML代码为
    // <span id="myspan">Hello</span>
    var span = document.getElementById('myspan');
    span.id // "myspan"
    span.tagName // "SPAN"
    ```

3. Element.dir

    <code style="color:#ea4335">Element.dir</code> attributes is used to write or read the text direction of current element.

4. Element.accessKey

    <code style="color:#ea4335">Element.accessKey</code> attribute is used to read and write the shortcut keys assigned to the current element.

    ```js
    let shitButton = document.getElementById('shitdiv');
    shitButton.accessKey = "h";
    ```

5. Element.draggable

    The <code style="color:#ea4335">Element.draggable</code> attribute return a Boolean value indicates that whether the current element can be dragged. This attribute can be read and written.

    ```js
    let shitButton = document.getElementById('shitdiv');
    shitButton.draggable = !(shitButton.draggable);
    ```

6. Element.lang

    The <code style="color:#ea4335">Element.lang</code> property returns the language setting of the current element. This attribute can be read and written.

    ```js
    // HTML 代码如下
    // <html lang="en">
    document.documentElement.lang // "en"
    ```

7. Element.tabIndex

    <code style="color:#ea4335">Element.tabIndex</code> attribute return an integer indicates the order of the current element when traversing through the <code style="color:#ea4335">Tab</code> key. This attribute can be read and written.

    The order is as follows:

    1. Elements with a positive <code style="color:#ea4335">tabIndex</code>. Elements that have indentical <code style="color:#ea4335">tabIndex</code> values should be navigared in the order they appear. Navigation proceeds from the lowest <code style="color:#ea4335">tabIndex</code> to the highest <code style="color:#ea4335">tabIndex</code>.
    2. Elements that do not support the <code style="color:#ea4335">tabIndex</code> attribute or support it and assign <code style="color:#ea4335">tabIndex</code> to <code style="color:#ea4335">0</code>, in the order they appear.

    Elements that are disabled do not participate in the tabbing order.

    Value don't need to be sequential, nor must they begin with any particular value. They may even be negative, though each browser trims very large values.

    **Syntax:**

    ```js
    element.tabIndex = index;
    var index = element.tabIndex;
    ```

    **Example:**

    ```js
    const b1 = document.getElementById('button1');

    b1.tabIndex = 1;
    ```

8. Element.title

    The <code style="color:#ea4335">Element.title</code> attribute is used to write and read the HTML attribute <code style="color:#ea4335">title</code> of current element. This attribute is usually used to specify the text prompt box that pops up when the mouse is hovering.

### 2.2 Related attributes of element state

1. Element.hidden

    The <code style="color:#ea4335">Element.hidden</code> attribute return an Boolean value, which represents the hidden attribute of the current element. It is used to control whether the current element is visible. This attribute can be read and written.

    ```js
    let bullshit = document.getElementById('bullshit');
    bullshit.hidden = !bullshit.hidden;
    ```

    CSS setting are higher than <code style="color:#ea4335">Element.hidden</code>. If the CSS specifies that the element is invisible (<code style="color:#ea4335">display:none</code>) or visible(<code style="color:#ea4335">display:hidden</code>), then Element.hidden does not change the actual visibility of the element.

2. Element.contentEditable, Element.isContentEditable

    HTML elements can set the <code style="color:#ea4335">contentEditable</code> attribute to make the content of element editable.

    The <code style="color:#ea4335">Element.contentEditable</code> attribute return a string inditating whether the <code style="color:#ea4335">contentEditable</code> attribute is set. There are three possible values. The attribute can be written.

    - "<code style="color:#ea4335">true</code>": Element content can be edited.
    - "<code style="color:#ea4335">false</code>": Element content cannot be edited.
    - "<code style="color:#ea4335">inherit</code>": Whether the element is editable, inherits the settings of the parent element.

    The <code style="color:#ea4335">isContentEditable</code> attribute return a Boolean value indicating whether the <code style="color:#ea4335">contenteditable</code> is set. The attribute is read-only.

    ```js
    let richdiv = document.getElementById('richdiv');
    let contentEditable = richdiv.contentEditable;
    //contentEditable: "inherit"
    ```

### 2.3 Element.attributes

The <code style="color:#ea4335">Element.attributes</code> return an array-like object, the members are all attribute nodes of the current element node. For detail, see the chapter "Operation of Attributes"

```js
let bullshit = document.getElementById('bullshit');
let attrs = bullshit.attributes;
for (let i = 0; i < attrs.length; i++) {
    console.log(attrs[i].name + "=>" + attrs[i].value;
}
```

### 2.4 Element.className, Element.classList

The <code style="color:#ea4335">className</code> attribute is used to read and write the <code style="color:#ea4335">class</code> attribute of the current node. It's vlaue is a string and each <code style="color:#ea4335">class</code> is separate with space.

The <code style="color:#ea4335">classList</code> attribute return an array-like object, each <code style="color:#ea4335">class</code> of the current element node is one of the member of this object.

```js
let bullshit = document.getElementById('bullshit');
let className = bullshit.className;
let classNode = bullshit.classList;
/**
 * className: "bullshit one two three"
 * classNode: DOMTokenList(4)
 * 0: "bullshit"
 * 1: "one"
 * 2: "two"
 * 3: "three"
 * length: 4
 * value: "bullshit one two three"
 */
```

The following is the methods of <code style="color:#ea4335">classList</code> object.

- <code style="color:#ea4335">add()</code>: add a class
- <code style="color:#ea4335">remove()</code>: remove a class
- <code style="color:#ea4335">contains()</code>: check whether the current element contains a certain class.
- <code style="color:#ea4335">toggle()</code>: Move a class into or out of the current element.
- <code style="color:#ea4335">item()</code>: return the class of the specified index position.
- <code style="color:#ea4335">toString()</code>: Convert the list of classes to strings.

```js
var div = document.getElementById('myDiv');

div.classList.add('myCssClass');
div.classList.add('foo', 'bar');
div.classList.remove('myCssClass');
div.classList.toggle('myCssClass'); // 如果 myCssClass 不存在就加入，否则移除
div.classList.contains('myCssClass'); // 返回 true 或者 false
div.classList.item(0); // 返回第一个 Class
div.classList.toString();
```

```js
var foo = document.getElementById('foo');

// 添加class
foo.className += 'bold';
foo.classList.add('bold');

// 删除class
foo.className = foo.className.replace(/^bold$/, '');
foo.classList.remove('bold');
```

The <code style="color:#ea4335">toggle</code> method can accept a Boolean value as the second parameter.

- If it is <code style="color:#ea4335">true</code>, then add this attribute.
- If it is <code style="color:#ea4335">false</code>, then remove this attribute.

```js
el.classList.toggle('abc', boolValue);

// 等同于
if (boolValue) {
  el.classList.add('abc');
} else {
  el.classList.remove('abc');
}
```

### 2.5 Element.dataset

Web page elements can customize <code style="color:#ea4335">date-</code> attributes to add data.

The <code style="color:#ea4335">Element.dataset</code> attribute return a object, you can read or write <code style="color:#ea4335">data-</code> attribute from this object.

An HTML data-* attribute and its corresponding DOM dataset.property modify their shared name according to where they are read or written:

**In HTML:**

The attribute name begins with <code style="color:#ea4335">data-</code>. It can contain only letters, numbers, dashes (-), periods (.), colons (:), and underscores (_). Any ASCII capital letters (A to Z) are converted to lowercase.

**In JavaScript:**

The property name of a custom data attribute is the same as the HTML attribute without the <code style="color:#ea4335">data-</code> prefix, and removes single dashes (-) for when to capitalize the property's "camelCased" name.

```html
<div 
data-columns="3" 
data-index-number="12314"
data-parent="cars" 
class="shits" id="richdiv">
</div>
```

```js
let richdiv = document.getElementById('richdiv');
let dataset = richdiv.dataset;
/**
 * dataset: DOMStringMap
 * columns: "3"
 * indexNumber: "12314"
 * parent: "cars"
 */
```

In addition to using <code style="color:#ea4335">dataset</code> to read and write <code style="color:#ea4335">data-</code> attributes, you can also use <code style="color:#ea4335">Element.getAttribute()</code> and <code style="color:#ea4335">Element.setAttribute()</code> to read and write these attributes through the complete attribute name.

### 2.6 Element.innerHTML

The <code style="color:#ea4335">Element.innerHTML</code> property returns a string, which is equivalent to all the HTML code contained in the element. This attribute can be read and wirrten, including <code style="color:#ea4335">\<HTML></code> and <code style="color:#ea4335">\<body></code> element and so on.

```js
let richdiv = document.getElementById('richdiv');
var richdivNode = "<div>shitdivvvv</div><p>最近不太皮<br>人应该学会前进</p>";
richdiv.innerHTML = richdivNode;
```

Note that when reading the attribute value, If the text node contanis <code style="color:#ea4335">&</code>,<code style="color:#ea4335"><</code> and <code style="color:#ea4335">></code>, the <code style="color:#ea4335">innerHTML</code> attribute will turn them into physical form <code style="color:#ea4335">&amp;</code>, <code style="color:#ea4335">&lt</code> and <code style="color:#ea4335">&gt</code>. If you want to get the original text, it is recommended to use the <code style="color:#ea4335">element.textContent</code> property.

```js
// HTML代码如下 <p id="para"> 5 > 3 </p>
document.getElementById('para').innerHTML
// 5 &gt; 3
```

when writing, if the inserted text contains HTML tags, it will be parse into a node object and inserted into the DOM. Note that if there is a <code style="color:#ea4335"> \<scirpt></code> tag in the text, Although script nodes can be generated, the inserted code will not be executed.

```js
var name = "<script>alert('haha')</script>";
el.innerHTML = name;
```

The above code inserts the scirpt into the content, but the script will not be executed. However, <code style="color:#ea4335">innerHTML</code> still has security risks.

```js
var name = "<img src=x onerror=alert(1)>";
el.innerHTML = name;
```

In the above code, the <code style="color:#ea4335">alert</code> method will be executed. Therefore, for security reason, if you insert text, it is best to use the <code style="color:#ea4335">textContent</code> attribute instead of <code style="color:#ea4335">innerHTML</code>.

### 2.7 Element.outerHTML

<code style="color:#ea4335">Elememt.outHTML</code> return a string representing all HTML codes of current element code, including the element itself and all child elements.

```js
// HTML 代码如下
// <div id="d"><p>Hello</p></div>
var d = document.getElementById('d');
d.outerHTML
// '<div id="d"><p>Hello</p></div>'
```

The <code style="color:#ea4335">outerHTML</code> attribute is can be read and written, assigning to it is equivalent to replacing the current element.

```js
// HTML 代码如下
// <div id="container"><div id="d">Hello</div></div>
var container = document.getElementById('container');
var d = document.getElementById('d');
container.firstChild.nodeName // "DIV"
d.nodeName // "DIV"

d.outerHTML = '<p>Hello</p>';
container.firstChild.nodeName // "P"
d.nodeName // "DIV"
```

In the above code, varible <code style="color:#ea4335">d</code> representing the child node, After its <code style="color:#ea4335">outerHTML</code> attribute is re-assigned, the inner <code style="color:#ea4335">div</code> element no longer exists and is replaced by the <code style="color:#ea4335">p</code> element.

However, the varible <code style="color:#ea4335">d</code> still point to the original <code style="color:#ea4335">div</code> element, this means that the replaced <code style="color:#ea4335">DIV</code> element still exists in memory.

Note that an error will be reported if the <code style="color:#ea4335">outerHTML</code> attribute of an node which does not have parent node is set.

```js
var div = document.createElement('div');
div.outerHTML = '<p>test</p>';
// DOMException: This element has no parent node.
```

### 2.8 Element.clientHeight, Element.clientWidth

The <code style="color:#ea4335">Element.clientHeight</code> property returns an integer value indicating the <code style="color:#ea4335">CSS</code> height of the element node(in pixels), only valid for block-level elements, returns <code style="color:#ea4335">0</code> for inline elements. If the <code style="color:#ea4335">CSS</code> height is not set for the block-level element, the actual height is returned.

In addition to the height of the element itself, it also includes the <code style="color:#ea4335">padding</code> part, but not the <code style="color:#ea4335">border</code> and <code style="color:#ea4335">margin</code>. It is need to substract the height of the horizontal scroll bar if there is a horizontal sroll bar.

Note that this value is always an integer, if it is a decimal, it will be rounded.

The <code style="color:#ea4335">Element.clienWidth</code> property is the same as above.

- -The <code style="color:#ea4335">clientHeight</code> attribute of the <code style="color:#ea4335">document.documentElement</code> returns the height of the current viewport(Ie the height of the browser window). It is equivalent to the <code style="color:#ea4335">window,innerHeight</code> property minus the height of the horizontal scroll bar(if any).
- The height of the <code style="color:#ea4335">document.body</code> is the actual height of the webpage.

```js
//视口height
let clientHeightDocumentElement
    = document.documentElement.clientHeight;
// 网页总高度
let clientHeightBody
    = document.body.clientHeight;
// clientHeightBody: 303
// clientHeightDocumentElement: 722
```

---
$\color{#B620E0}{question}$

why the clientHeightBody is always 303?

$\color{#B620E0}{answer}$:

because in the test the element of body is only tatolly 303.

---

### 2.9 Element.clientLeft, Element.clientTop

The <code style="color:#ea4335">Element.clientLeft</code> attribute is equal to the width of the left borber of the element node(in pixels), it dose not include <code style="color:#ea4335">padding</code> and <code style="color:#ea4335">margin</code> on the left.

If the left border is not set or it its an liline element (<code style="color:#ea4335">display: inline</code>), this property returns <code style="color:#ea4335">0</code>.

This attribute always returns an integer value, if it is a decimal, it will be rounded.

```js
let shits = document.getElementById('richdiv');    
let shitLeft = shits.clientLeft;
//0
```

The attribute of the <code style="color:#ea4335">Element.clientTop</code> is equal to the width of the top border of the webpage element (in pixels). Other features are the same as <code style="color:#ea4335">clientLeft</code>.

### 2.10 Element.scrollHeight, Element.scrollWidth

The <code style="color:#ea4335">Element.scrollHeight</code> attribute return an integer value(an decimal will be rounded), including overflow containers, parts that are not currently visible.

It also includes the height of <code style="color:#ea4335">padding</code> and the pseudo-element(<code style="color:#ea4335">::before</code> or <code style="color:#ea4335">::after</code>), but it does include the height of the <code style="color:#ea4335">border</code>, <code style="color:#ea4335">margin</code> and Horizontal scroll bar.

The <code style="color:#ea4335">Element.scrollWith</code> attribute represents the total width of the current element(in pixels). Other features are similar to the <code style="color:#ea4335">scrollHeight</code> property.

These two attributes are read-only.

The total height of the entire webpage can bbe read from <code style="color:#ea4335">document.documentElement</code> or <code style="color:#ea4335">document.body</code>

```js
let webHeight = document.documentElement.scrollHeight;
let webWidth = document.documentElement.scrollWidth;
/**
 * webHeight: 1012
 * webWidth: 495
 */
```

---
The difference of offseiHeight, clientHeight and scrollHeight

- <code style="color:#ea4335">client</code>

    returns the inner height of element in pixels, including padding but not including the height of the horizontal <code style="color:#ea4335">scrollbar</code>, <code style="color:#ea4335">border</code>, or <code style="color:#ea4335">margin</code>

- <code style="color:#ea4335">offsetHeight</code>

    It is a measurement which includes the element borders, the element vertical padding , the element horizontal scrollbar(if present) and the element CSS height

- <code style="color:#ea4335">scrollHeight</code>

    It is a mearsurement of the height of an element's content inclueding content <code style="color:#ea4335">not visible</code> on the screen <code style="color:#ea4335">due to overflow</code>

    ![20211030202723](https://raw.githubusercontent.com/Logible/Image/main/note_image/20211030202723.png)

---

### 2.11 Element.scrollLeft, Element.scrollTop

- The <code style="color:#ea4335">Element.scrollLeft</code> attribute represents the number of pixels that the horizontal scroll bar of the current element scrolls to the right.
- The <code style="color:#ea4335">Element.scrollTop</code> attribute represents the number of pixels that the veritical scroll bar of the current element scrolls to the bottom.

For those web page elements without scroll bars, these two attributes are always equal to 0.

If you want to view the horizontal and vertical scrolling distance of the entire page, you must read it from the <code style="color:#ea4335">document.documentElement</code> element.

```js
document.documentElement.scrollLeft
document.documentElement.scrollTop
```

Both of these attributes are readable and writable. Setting the value of this attribute will cause the browser to automatically scroll the current element to the corresponding position.

```js
document.documentElement.scrollTop = 0;
//Jump to the top
```
