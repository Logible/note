# Node Interface

- [Node Interface](#node-interface)
  - [1.properties](#1properties)
    - [1.1 Node.prototype.nodeType](#11-nodeprototypenodetype)
    - [1.2 Node.prototype.nodeName](#12-nodeprototypenodename)
    - [1.3 Node.prototype.nodeValue](#13-nodeprototypenodevalue)
    - [1.4 Node.prototype.textContent](#14-nodeprototypetextcontent)
    - [1.5 Node.prototype.baseURL](#15-nodeprototypebaseurl)
    - [1.6 Node.prototype.ownerDocument](#16-nodeprototypeownerdocument)
    - [1.7 Node.prototype.nextSibling](#17-nodeprototypenextsibling)
    - [1.8 Node.prototype.previousSibling](#18-nodeprototypeprevioussibling)
    - [1.9 Node.prototype.parentNode](#19-nodeprototypeparentnode)
    - [1.10 Node.prototype.parentElement](#110-nodeprototypeparentelement)
    - [1.11 Node.prototype.firstChild, Node.prototype.lastChild](#111-nodeprototypefirstchild-nodeprototypelastchild)
    - [1.12 Node.prototype.childNodes](#112-nodeprototypechildnodes)
    - [1.13 Node.prototype.isConnected](#113-nodeprototypeisconnected)
  - [2.methods](#2methods)
    - [2.1 Node.prototype.appendChild()](#21-nodeprototypeappendchild)
    - [2.2 Node.prototype.hasChildNodes()](#22-nodeprototypehaschildnodes)
    - [2.3 Node.prototype.cloneNode()](#23-nodeprototypeclonenode)

## 1.properties

### 1.1 Node.prototype.nodeType

The <code style="color:#ea4335">nodeType</code> property return an integer value that represent the type of nodes.

The Node object defines several constants corresponding to these type values.

The <code style="color:#ea4335">nodeType</code> value and corresponding constants of different nodes are as follows.

- document: 9, corresponding to the constant <code style="color:#ea4335">Node.DOCUMENT_NODE</code>
- element:1, corresponding to the constant <code style="color:#ea4335">Node.ELEMENT_NODE</code>
- attr:2, corresponding to the constant <code style="color:#ea4335">Node.ATTRIBUTE_NODE</code>
- text:3, corresponding to the constant <code style="color:#ea4335">Node.TEXT_NODE</code>
- DocumentFragment:11, corresponding the constant <code style="color:#ea4335">Node.DOCUMENT_FRAGMENT_NODE</code>
- Comment:8, corresponding the constant <code style="color:#ea4335">Node.COMMENT_NODE</code>

When determining the node type, using the nodeType property is a common method.

```JS
var node = document.documentElement.firstChild;
if (node.nodeType === Node.ELEMENT_NODE) {
    console.log('该节点是元素节点');
    console.log(node.nodeType);//1
}
```

### 1.2 Node.prototype.nodeName

<code style="color:#ea4335">nodeName</code> properties return the name of Nodes.

```js
// HTML 代码如下
// <div id="d1">hello world</div>
var div = document.getElementById('d1');
div.nodeName // "DIV"
```

The <code style="color:#ea4335">nodeName</code> properties of different nodes are as follow.

- <code style="color:#ea4335">Document</code>: <code style="color:#ea4335">#document</code>
- <code style="color:#ea4335">Element</code>: Uppercase tag name
- <code style="color:#ea4335">Attr</code>: The name of attributes
- <code style="color:#ea4335">Text</code>:<code style="color:#ea4335">#text</code>
- <code style="color:#ea4335">DocumentFragment</code>: <code style="color:#ea4335">#document-frament</code>
- <code style="color:#ea4335">DocumentType</code>: The type of document
- <code style="color:#ea4335">Comment</code>: <code style="color:#ea4335">#comment</code>

### 1.3 Node.prototype.nodeValue

The <code style="color:#ea4335">nodeValue</code> attribute return a string representing the text value of the current node itself. This property can be read and written.

Only text, comment, attribute nodes have text values. Therefore, the <code style="color:#ea4335">nodeValue</code> of these three types of nodes can return results, anc all other types of nodes will return <code style="color:#ea4335">null</code>.

```js
// HTML 代码如下
// <div id="d1">hello world</div>
var div = document.getElementById('d1');
div.nodeValue // null
div.firstChild.nodeValue // "hello world"
```

### 1.4 Node.prototype.textContent

<code style="color:#ea4335">textContent</code> property returns the text content of the current node and all its descendants.

```js
// HTML 代码为
// <div id="divA">This is <span>some</span> text</div>

document.getElementById('divA').textContent
// This is some text
```

The <code style="color:#ea4335">textContent</code> property attribure automatically ignores the HTML tags inside the current node and returns all text content.

this property can be read and written. Setting the value of this property will replace all the original child nodes with a new text node.

It also has the advantage of automatically escaping HTML tags. This is great for user-providedc content.

```js
document.getElementById('foo').textContent = '<p>GoodBye!</p>';
```

when the above code inserts text. it will interpret the <code style="color:#ea4335">\<p></code> tag as text instead of processing is as a tag

- For text nodes, comment nodes and attribute node, the value of the <code style="color:#ea4335">textContent</code> attribute is the same as the <code style="color:#ea4335">nodeValue</code> attribute.

```js
    let shit_textContent =
        document.getElementById('shit').firstChild.textContent;
    let shit_nodeValue =
        document.getElementById('shit').firstChild.nodeValue;

    console.log("shit_textContent",shit_textContent);
    console.log("shit_nodeValue",shit_nodeValue);
```

- For other type nodes, This attribute will connect the contents of each child node (not including the comment node) together and return. it will return an empty string if a certain node does't have child nodes.

The <code style="color:#ea4335">textContent</code> property of document and doctype is null. If you want to read the content of the entire document, you can use <code style="color:#ea4335">document.documentElement.textContent.</code>

### 1.5 Node.prototype.baseURL

<code style="color:#ea4335">baseURL</code> return a string representing the absolute path of the current webpage.

The browser calculates the relative path URL on the web page based on this attributes. This attribute is read-only.

```js
// 当前网页的网址为
// http://www.example.com/index.html
document.baseURI
// "http://www.example.com/index.html"
```

The value of this attribute is generally determined by the URL of the current website(ie <code style="color:#ea4335">window.location</code> attribute). However , it can change the value of attribute by using <code style="color:#ea4335">\<base></code> tag of HTML.

```js
<base href="http://www.example.com/page.html">
```

### 1.6 Node.prototype.ownerDocument

<code style="color:#ea4335">Node.ownerDocument</code> property return top-level document object of the current node, that is, the document oject.

```js
var d = p.ownerDocument;
d === document // true
```

The <code style="color:#ea4335">ownerDocument</code> property of the <code style="color:#ea4335">document</code> object itself returns <code style="color:#ea4335">null</code>

### 1.7 Node.prototype.nextSibling

<code style="color:#ea4335">Node.nextSibling</code> property returns the first sibling node immediately after current node. If there is no node at the same level after current node, <code style="color:#ea4335">null</code> is returned.

Note that this property also includes text nodes and comment nodes(<code style="color:#ea4335">\<!--comment--></code>). Therefore, If there is a space after the current node, this attribute will return a text node with a space as  the content.

<code style="color:#ea4335">nextSibling</code> attribute can be used to traverse all child nodes.

```js
let shit = document.getElementById('shits').firstChild;
while (null != shit) {
    console.log(shit.textContent);
    shit = shit.nextSibling;
}
```

### 1.8 Node.prototype.previousSibling

<code style="color:#ea4335">previousSibing</code> property returns the nearest sibling node in front of the current code.

```js
// HTML 代码如下
// <div id="d1">hello</div><div id="d2">world</div>
var d1 = document.getElementById('d1');
var d2 = document.getElementById('d2');

d2.previousSibling === d1 // true
```

Note that this property also includes text nodes and comment nodes(<code style="color:#ea4335">\<!--comment--></code>). Therefore, If there is a space after the current node, this attribute will return a text node with a space as  the content.

### 1.9 Node.prototype.parentNode

The <code style="color:#ea4335">parentNode</code> property returns the parent node of the current node. For a node, its parent node can only be of three types:

- element
- document
- documentfragment

```js
if (node.parentNode) {
  node.parentNode.removeChild(node);
}
```

The above code remove the <code style="color:#ea4335">node</code> node from the document through the <code style="color:#ea4335">node.parentNode</code> property.

The parent node of <code style="color:#ea4335">document</code> and <code style="color:#ea4335">documentfragment</code> is <code style="color:#ea4335">null</code>. In addition, for those nodes that have not been inserted into the DOM tree after generaion, the parent node is also <code style="color:#ea4335">null</code>.

### 1.10 Node.prototype.parentElement

The <code style="color:#ea4335">parentElement</code> property return the parent node of current node. If the current node does't have parent node or its parent node isn't an element node, <code style="color:#ea4335">null</code> is return.

Since the parent node can be only be of three types.

- element
- document
- documentfragment

The <code style="color:#ea4335">parentElement</code> is equivalent to excluding the latter two parent nodes.

### 1.11 Node.prototype.firstChild, Node.prototype.lastChild

The <code style="color:#ea4335">firstChild</code> property returns the first child node of the current node, or <code style="color:#ea4335">null</code> if the current node has no child node.

Note that in addition to element nodes returned by <code style="color:#ea4335">firstChild</code>, it may also be text nodes or comment nodes.

```js
// HTML 代码如下
// <p id="p1">
//   <span>First span</span>
//  </p>
var p1 = document.getElementById('p1');
p1.firstChild.nodeName // "#text"
```

There is a blank character between the <code style="color:#ea4335">p</code> element and the <code style="color:#ea4335">span</code> element, which causes <code style="color:#ea4335">firstChild</code> to return a text node.

<code style="color:#ea4335">lastChild</code> property return the last child node of the current node, or null if the current node has no child node. The usage is equivalent to <code style="color:#ea4335">firstChild</code> property.

### 1.12 Node.prototype.childNodes

```js
let shitChild = document.getElementById('shits').childNodes;

for (var i = 0; i < shitChild.length; i++) {
    console.log(shitChild[i].textContent);
}
```

<code style="color:#ea4335">childNodes</code> property returns an array-like object(NodeList collection), The members include all nodes of the current node.

Using this attribute, you can traverse all the child nodes of a node.

```js
let shitChild = document.getElementById('shits').childNodes;

for (var i = 0; i < shitChild.length; i++) {
    console.log(shitChild[i].textContent);
}
```

The document has two child node:

- docType node
- HTML root element node

```js
var children = document.childNodes;
for (var i = 0; i < children.length; i++) {
  console.log(children[i].nodeType);
}
// 10   docType node
// 1    element node
```

Note that in addition element node, the <code style="color:#ea4335">childNodes</code> property also includes text node and comment node. If the current node does not include any child nodes, an empty <code style="color:#ea4335">Nodelist</code> collection is returned. Since the NodeList object is a dynamic collection, once the child node changes, it will immediately be reflected in the returned result.

### 1.13 Node.prototype.isConnected

<code style="color:#ea4335">inConnected</code> property return a Boolean value indicating whether the current node is in the document.

```js
var test = document.createElement('p');
test.isConnected // false

document.body.appendChild(test);
test.isConnected // true
```

In the above code, the test node is the node generated by the script, before inserting the document, the <code style="color:#ea4335">isConnected</code> property returns <code style="color:#ea4335">false</code>, and after inserting it returns <code style="color:#ea4335">true</code>.

## 2.methods

### 2.1 Node.prototype.appendChild()

<code style="color:#ea4335">appendChild()</code> method accepts a node object as a parameter, takes it as the last child node, and inserts the current node. The return value of this method is the child node of inserted document.

```js
var p = document.createElement('p');
document.body.appendChild(p);
```

If the parameter node is an existing node in the DOM, the <code style="color:#ea4335">appendChild()</code> method will move it from the original position the new position.

```js
var div = document.getElementById('myDiv');
document.body.appendChild(div);
```

If the parameter of <code style="color:#ea4335">appendChild()</code> method is <code style="color:#ea4335">DocumentFragment</code> node, then all the child nodes of <code style="color:#ea4335">DocumentFragment</code> are inserted instead of the <code style="color:#ea4335">DocumentFragment</code> node itself. The return value is an empty <code style="color:#ea4335">DocumentFragement</code> node.

### 2.2 Node.prototype.hasChildNodes()

<code style="color:#ea4335">hasChildNodes()</code> method return a Boolean value indicating that whether the current node has child node.

There are many ways to determine whether a node has child nodes, The following are three of them

- <code style="color:#ea4335">node.hasChildNodes()</code>
- <code style="color:#ea4335">node.firstChild !== null</code>
- <code style="color:#ea4335">node.childNodes && node.childNodes.length > 0</code>

The <code style="color:#ea4335">hasChildNodes</code> method combines the <code style="color:#ea4335">firstChild</code> porperty and <code style="color:#ea4335">nextSibling</code> property can traverse the all descendant node of the current node.

```js
window.onload = function () {
    function Domcomb(parent, callback) {
        if (parent.hasChildNodes()) {
            for (var node = parent.firstChild; node; node = node.nextSibling) {
                Domcomb(node, callback);
            }
        }
        callback(parent);
    }
    Domcomb(document.body, console.log)
}
```

---
why does it have no output???

---

### 2.3 Node.prototype.cloneNode()

<code style="color:#ea4335">cloneNode</code> method is used to clone a node. It accept a Boolean as a parameter, indicating whether to clone child nodes at the same time.

```js
var cloneUL = document.querySelector('ul').cloneNode(true);
```

There are some points to note when using this method

- Cloning a node will copy all the attributes of the node. But the <code style="color:#ea4335">addEventListener</code> method and <code style="color:#ea4335">on-</code> attributes (ie node.onclick = fn) will be lost
- The node returnd by this method is not in the document, that is, there is no parent node. Must be added to the document using methods such as <code style="color:#ea4335">Node.appendChild</code>
- After cloning a node, there may be two webpage elements with the same id attribute(ie <code style="color:#ea4335">id='xxx'</code>) in the DOM, at this time, the <code style="color:#ea4335">id</code> attribute of one of elements should be modified. If the original node has a <code style="color:#ea4335">name</code> attribute, it may also need to be modified.
