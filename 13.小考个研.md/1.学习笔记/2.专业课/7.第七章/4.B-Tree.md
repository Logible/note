# B-Tree

- [B-Tree](#b-tree)
  - [7.4.1 B树及其基本操作](#741-b树及其基本操作)

## 7.4.1 B树及其基本操作

- ![B-tree instance](https://raw.githubusercontent.com/Logible/Image/main/note_image/20220902004202.png)

1. 定义
   1. B树，又称多路平衡查找树，B树中所有结点的孩子个数的最大值称为B树的阶，通常用m表示。一棵m阶B树或为空树，或为满足如下特性的m叉树
      1. 树中每个结点至多有m棵子树，即至多含有m-1个关键字。
      2. 若根结点不是终端结点，则至少有两棵子树
      3. 除根结点外的所有非叶结点至少有$\lceil \frac{m}{2} \rceil$棵子树，即至少含有$\lceil \frac{m}{2} \rceil - 1$个关键字
      4. 所有的叶结点都出现在同一层次上，并且不带信息（可以视为外部结点或类似于折半查找判定树的查找失败结点，实际上这些结点不存在，指向这些结点的指针为空）
      5. 结点结构
         1. ![Nodes structure](https://raw.githubusercontent.com/Logible/Image/main/note_image/20220902004120.png)

2. B树的高度
   1. 若$n \ge 1$,则对任意一棵包含$n$个关键字、高度为$h$、阶数为$m$的B树：
      1. $h \ge log_m(n+1)$
         1. 因为B树中每个结点最多有$m$棵子树，$m-1$个关键字，所以上述B树应满足
         2. $n \le (m-1)(1+m+m^2+...+m^{h-1})=m^h-1$
      2. $\displaystyle h \le log_{\lceil \frac{m}{2} \rceil}\frac{n+1}{2}+1$
         1. $n$个关键字的B树必有$n+1$个叶子结点
            1. n个关键字将数域分为$n+1$个区间
         2. 最大高度——让各层的分叉尽可能的少，即根节点只有2个分叉，其他结点只有$\lceil \frac{m}{2} \rceil$个分叉
            1. 各层结点至少有:
               1. 第一层1,第二层2,第三层$2\lceil \frac{m}{2} \rceil$...第h层$2(\lceil \frac{m}{2} \rceil)^{h-2}$
               2. 第h+1层共有叶子结点(失败结点)$2(\lceil \frac{m}{2} \rceil)^{h-1}$个
            2. 故$n+1 \ge 2(\lceil \frac{m}{2} \rceil)^{h-1}$
