# çº¿ç´¢äºŒå‰æ ‘

- [çº¿ç´¢äºŒå‰æ ‘](#çº¿ç´¢äºŒå‰æ ‘)
  - [1. çº¿ç´¢äºŒå‰æ ‘çš„åŸºæœ¬æ¦‚å¿µ](#1-çº¿ç´¢äºŒå‰æ ‘çš„åŸºæœ¬æ¦‚å¿µ)
  - [2.ä¸­åºçº¿ç´¢äºŒå‰æ ‘çš„æ„é€ ](#2ä¸­åºçº¿ç´¢äºŒå‰æ ‘çš„æ„é€ )
  - [3.ä¸­åºçº¿ç´¢äºŒå‰æ ‘çš„éå†](#3ä¸­åºçº¿ç´¢äºŒå‰æ ‘çš„éå†)
  - [4.å…ˆåºçº¿ç´¢äºŒå‰æ ‘å’Œååºçº¿ç´¢äºŒå‰æ ‘](#4å…ˆåºçº¿ç´¢äºŒå‰æ ‘å’Œååºçº¿ç´¢äºŒå‰æ ‘)

## 1. çº¿ç´¢äºŒå‰æ ‘çš„åŸºæœ¬æ¦‚å¿µ

1. ç”±æ¥
   1. åœ¨å«nä¸ªç»“ç‚¹çš„äºŒå‰æ ‘ä¸­ï¼Œæœ‰n+1ä¸ªç©ºæŒ‡é’ˆ, åˆ©ç”¨è¿™äº›ç©ºæŒ‡é’ˆæ¥å­˜æ”¾æŒ‡å‘å…¶å‰é©±æˆ–åç»§çš„æŒ‡é’ˆ, è¿™æ ·å°±å¯ä»¥åƒéå†å•é“¾è¡¨é‚£æ ·æ–¹ä¾¿åœ°éå†äºŒå‰æ ‘

2. è§„å®š
   1. è‹¥æ— å·¦å­æ ‘ï¼Œä»¤lchildæŒ‡å‘å…¶å‰é©±ç»“ç‚¹;
   2. è‹¥æ— å³å­æ ‘ï¼Œä»¤rchildæŒ‡å‘å…¶åç»§ç»“ç‚¹;
   3. æ­¤å¤–
      1. è¿˜éœ€å¢åŠ ä¸¤ä¸ªæ ‡å¿—åŸŸæ ‡è¯†æŒ‡é’ˆåŸŸæ˜¯:
         1. æŒ‡å‘å·¦(å³)å­©å­
         2. è¿˜æ˜¯æŒ‡å‘å‰é©±(åç»§)

3. ç»“ç‚¹ç»“æ„

    |lchild|ltag|data|rtag|rchild|
    |--|--|--|--|--|
    |

    $$ltag\begin{cases}
    0 & lchildåŸŸæŒ‡ç¤ºç»“ç‚¹çš„å·¦å­©å­\\
    1 & lchildåŸŸæŒ‡ç¤ºç»“ç‚¹çš„å‰é©±
    \end{cases}$$

    $$rtag\begin{cases}
    0 & rchildåŸŸæŒ‡ç¤ºç»“ç‚¹çš„å³å­©å­\\
    1 & rchildåŸŸæŒ‡ç¤ºç»“ç‚¹çš„åç»§
    \end{cases}$$

4. å®šä¹‰
   1. çº¿ç´¢é“¾è¡¨
      1. ä»¥è¿™ç§ç»“ç‚¹ç»“æ„æ„æˆçš„**äºŒå‰é“¾è¡¨**ä½œä¸ºäºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„;
   2. çº¿ç´¢
      1. æŒ‡å‘ç»“ç‚¹å‰é©±å’Œåç»§çš„æŒ‡é’ˆ;
   3. çº¿ç´¢äºŒå‰æ ‘
      1. åŠ ä¸Šçº¿ç´¢çš„äºŒå‰æ ‘;

5. æ‰‹åŠ¨çº¿ç´¢
   1. æ ‡å‡ºç»“ç‚¹è®¿é—®é¡ºåº
   2. æŒ‰ç…§ç©ºå·¦ç»“ç‚¹æŒ‡å‘ç»“ç‚¹çš„å‰é©±
   3. ç©ºå³ç»“ç‚¹æŒ‡å‘ç»“ç‚¹çš„åç»§
   4. é‡å¤23, å®Œæˆæ„é€ çº¿ç´¢äºŒå‰æ ‘

## 2.ä¸­åºçº¿ç´¢äºŒå‰æ ‘çš„æ„é€ 

1. çº¿ç´¢åŒ–çš„å®è´¨
   1. å°†äºŒå‰é“¾è¡¨ä¸­çš„**ç©ºæŒ‡é’ˆ**æ”¹ä¸ºæŒ‡å‘**å‰é©±æˆ–åç»§çš„çº¿ç´¢**ã€‚è€Œå‰é©±æˆ–åç»§çš„ä¿¡æ¯åªæœ‰åœ¨éå†æ—¶æ‰èƒ½å¾—åˆ°ï¼Œå› æ­¤çº¿ç´¢åŒ–çš„å®è´¨å°±æ˜¯**éå†ä¸€æ¬¡äºŒå‰æ ‘**;

2. ç®—æ³•æ€æƒ³
   1. é™„è®¾æŒ‡é’ˆ**pre**æŒ‡å‘åˆšåˆšè®¿é—®è¿‡çš„ç»“ç‚¹
   2. æŒ‡é’ˆpæŒ‡å‘æ­£åœ¨è®¿é—®çš„ç»“ç‚¹ï¼Œå³preæŒ‡å‘pçš„å‰é©±
   3. åœ¨ä¸­åºéå†çš„è¿‡ç¨‹ä¸­
      1. æ£€æŸ¥pçš„å·¦æŒ‡é’ˆæ˜¯å¦ä¸ºç©º
         1. è‹¥ä¸ºç©ºå°±å°†å®ƒæŒ‡å‘pre
      2. æ£€æŸ¥preçš„å³æŒ‡é’ˆæ˜¯å¦ä¸ºç©º
         1. è‹¥ä¸ºç©ºå°±å°†å®ƒæŒ‡å‘p

```c
void InThread(ThreadTree &p, ThreadTree &pre)
{
    if (p != NULL)
    {
        //é€’å½’ çº¿ç´¢åŒ–å·¦å­æ ‘
        InThread(p->lchild, pre);

        //å¤„ç†æ ¹èŠ‚ç‚¹
        visit(p, pre);

        //é€’å½’ çº¿ç´¢åŒ–å³å­æ ‘
        InThread(p->rchild, pre);
    }
}

//å¤„ç†æ ¹èŠ‚ç‚¹
void visit(ThreadTree &p, ThreadTree &pre)
{

    if (p->lchild == NULL)
    {
        p->lchild = pre;
        p->ltag = 1;
    }

    if (pre != NULL && pre->rchild == NULL)
    {
        pre->rchild = p;
        pre->tag = 1;
    }
    pre = p;
}

void CreateInThread(ThreadTree T)
{
    ThreadTree pre = NULL;
    if (T != NULL) //éç©ºäºŒå‰æ ‘, çº¿ç´¢åŒ–
    {
        InThread(T, pre);   //çº¿ç´¢åŒ–äºŒå‰æ ‘
        if(pre->rchild == NULL); //å¤„ç†éå†çš„æœ€åä¸€ä¸ªç»“ç‚¹
            pre->tag = 1;
    }
}

```

## 3.ä¸­åºçº¿ç´¢äºŒå‰æ ‘çš„éå†

- éå†ä¸­åºçº¿ç´¢äºŒå‰æ ‘
- ç®—æ³•æ€æƒ³
    1. ä»¤æ ‘Tä¸ºç¬¬ä¸€ä¸ªç»“ç‚¹, è®¿é—®
    2. ä¾æ¬¡æ‰¾åç»§ç»“ç‚¹
       1. è‹¥å·²è¢«çº¿ç´¢åŒ–, ç›´æ¥è¿”å›åç»§
       2. è‹¥æœªè¢«çº¿ç´¢åŒ–, è¿”å›å³å­æ ‘ä¸­æœ€å·¦ä¸‹ç»“ç‚¹(å³åç»§)

```c
//æ‰¾åˆ°ä»¥Pä¸ºæ ¹çš„å­æ ‘ä¸­ï¼Œç¬¬ä¸€ä¸ªè¢«ä¸­åºéå†çš„ç»“ç‚¹
ThreadNode *Firstnode(ThreadNode *p)
{
    //==0æ—¶è¯´æ˜è¯¥èŠ‚ç‚¹å·²æ— å·¦å­©å­
    //å¾ªç¯æ‰¾åˆ°æœ€å·¦ä¸‹ç»“ç‚¹(ä¸ä¸€å®šæ˜¯å¶ç»“ç‚¹)
    while (p->ltag == 0)
        p = p->lchild;
    return p;
}

//åœ¨ä¸­åºçº¿ç´¢äºŒå‰æ ‘ä¸­æ‰¾åˆ°ç»“ç‚¹pçš„åç»§ç»“ç‚¹
ThreadNode *Nextnode(ThreadNode *p)
{
    //å³å­æ ‘æœ‰ç»“ç‚¹
    if (p->rtag == 0)
        return Firstnode(p->rchild);
    else
        return p->rchild; // rtag==1ç›´æ¥è¿”å›åç»§çº¿ç´¢
}

void Inorder(ThreadNode *T)
{
    for (ThreadNode *p = Firstnode(T); p != NULL; p = Nextnode(p))
        visit(p);
}
```

ç©ºé—´å¤æ‚åº¦O(1)

- é€†å‘éå†çº¿ç´¢äºŒå‰æ ‘

```c
//æ‰¾åˆ°ä»¥Pä¸ºæ ¹çš„å­æ ‘ä¸­ï¼Œæœ€åä¸€ä¸ªè¢«éå†çš„ç»“ç‚¹
ThreadNode *LastNode(ThreadNode *p)
{
    //å¾ªç¯æ‰¾åˆ°å·¦èŠ‚ç‚¹æœ€å³ä¸‹ç»“ç‚¹(ä¸ä¸€å®šæ˜¯å¶ç»“ç‚¹)
    while (p->ltag == 0)
        p = p->rchild;
    return p;
}

//åœ¨ä¸­åºçº¿ç´¢äºŒå‰æ ‘ä¸­æ‰¾åˆ°ç»“ç‚¹pçš„åç»§ç»“ç‚¹
ThreadNode *Nextnode(ThreadNode *p)
{
    //æœ‰å·¦èŠ‚ç‚¹
    if (p->rtag == 0)
        return LastNode(p->lchild);
    else
        return p->lchild; // ltag==1ç›´æ¥è¿”å›å‰é©±çº¿ç´¢
}

//å¯¹ä¸­åºçº¿ç´¢äºŒå‰æ ‘è¿›è¡Œé€†å‘ä¸­åºéå†
void RevInorder(ThreadNode *T)
{
    for (ThreadNode *p = LastNode(T); p != NULL; p = Nextnode(p))
        visit(p);
}
```

|--|ä¸­åºçº¿ç´¢äºŒå‰æ ‘|å…ˆåºçº¿ç´¢äºŒå‰æ ‘|ååºçº¿ç´¢äºŒå‰æ ‘
|-|--|--|--|
æ‰¾å‰é©±|âˆš|Ã—|âˆš
æ‰¾åç»§|âˆš|âˆš|Ã—

äºŒè€…æƒ³è¦å®ç°çš†è¦åŒäº²ç»“ç‚¹ğŸ‘†

## 4.å…ˆåºçº¿ç´¢äºŒå‰æ ‘å’Œååºçº¿ç´¢äºŒå‰æ ‘

- å…ˆåºçº¿ç´¢äºŒå‰æ ‘

1. è®¿é—®å·¦èŠ‚ç‚¹æ—¶, ç”±äºå…ˆåºè®¿é—®é¡ºåºæ˜¯ ä¸­å·¦å³
   1. è‹¥å·¦ç»“ç‚¹ä¸ºç©º, åˆ™æŒ‡å‘å·¦èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
   2. è€Œåå¼€å§‹è®¿é—®å·¦èŠ‚ç‚¹çš„å·¦å­æ ‘, ä»è€Œé€ æˆå¾ªç¯é€’å½’
2. æ‰€ä»¥éœ€è¦å…ˆåˆ¤æ–­å·¦èŠ‚ç‚¹æ˜¯å¦æ˜¯çº¿ç´¢

```c
void PreThread(ThreadTree &p, ThreadTree &pre)
{
    if (p != NULL)
    {
        //å¤„ç†æ ¹èŠ‚ç‚¹
        visit(p, pre);

        //çº¿ç´¢åŒ–å·¦å­æ ‘ åˆ¤æ–­==0é˜²æ­¢é€’å½’
        if (T->ltag == 0)
            PreThread(p->lchild, pre);

        //é€’å½’ çº¿ç´¢åŒ–å³å­æ ‘
        PreThread(p->rchild, pre);
    }
}

//å¤„ç†æ ¹èŠ‚ç‚¹
void visit(ThreadTree &p, ThreadTree &pre)
{

    if (p->lchild == NULL)
    {
        p->lchild = pre;
        p->ltag = 1;
    }

    if (pre != NULL && pre->rchild == NULL)
    {
        pre->rchild = p;
        pre->tag = 1;
    }
    pre = p;
}

void CreatePreThread(ThreadTree T)
{
    ThreadTree pre = NULL;
    if (T != NULL) //éç©ºäºŒå‰æ ‘, çº¿ç´¢åŒ–
    {
        PreThread(T, pre);  //çº¿ç´¢åŒ–äºŒå‰æ ‘
        if(pre->rchild == NULL); //å¤„ç†éå†çš„æœ€åä¸€ä¸ªç»“ç‚¹
            pre->tag = 1;
    }
}
```

- ååºçº¿ç´¢äºŒå‰æ ‘

```c
void PostThread(ThreadTree &p, ThreadTree &pre)
{
    if (p != NULL)
    {
        //å¤„ç†æ ¹èŠ‚ç‚¹
        visit(p, pre);

        //é€’å½’ çº¿ç´¢åŒ–å·¦å­æ ‘
        PostThread(p->lchild, pre);

        //é€’å½’ çº¿ç´¢åŒ–å³å­æ ‘
        PostThread(p->rchild, pre);
    }
}

//å¤„ç†æ ¹èŠ‚ç‚¹
void visit(ThreadTree &p, ThreadTree &pre)
{

    if (p->lchild == NULL)
    {
        p->lchild = pre;
        p->ltag = 1;
    }

    if (pre != NULL && pre->rchild == NULL)
    {
        pre->rchild = p;
        pre->tag = 1;
    }
    pre = p;
}

void CreatePostThread(ThreadTree T)
{
    ThreadTree pre = NULL;
    if (T != NULL) //éç©ºäºŒå‰æ ‘, çº¿ç´¢åŒ–
    {
        PostThread(T, pre); //çº¿ç´¢åŒ–äºŒå‰æ ‘
        if(pre->rchild == NULL); //å¤„ç†éå†çš„æœ€åä¸€ä¸ªç»“ç‚¹
            pre->tag = 1;
    }
}
```
