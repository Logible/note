# 关系数据库

- [关系数据库](#关系数据库)
  - [实际的数据库系统支持的主要数据模型，基本层次联系，层次模型、网状模型的数据结构](#实际的数据库系统支持的主要数据模型基本层次联系层次模型网状模型的数据结构)
  - [关系的定义及关系的特性，关系模式的表示，元组、属性、主属性、码、候选码、非码属性、全码、外码的概念](#关系的定义及关系的特性关系模式的表示元组属性主属性码候选码非码属性全码外码的概念)
  - [⭐关系模型的三个组成部分及各部分所包括的主要内容](#关系模型的三个组成部分及各部分所包括的主要内容)
    - [关系模型的数据结构](#关系模型的数据结构)
    - [关系模型的数据操纵](#关系模型的数据操纵)
    - [完整性约束](#完整性约束)
    - [笛卡尔积](#笛卡尔积)
  - [关系代数的运算：传统的集合运算（并、交、差、笛卡儿积）](#关系代数的运算传统的集合运算并交差笛卡儿积)
  - [专门的关系运算（选择、投影、连接、除法）](#专门的关系运算选择投影连接除法)

1、要求考生熟练掌握关系模型的三个组成部分及各部分所包括的主要内容。
2、要求考生掌握关系数据结构及其定义。
3、要求考生熟练掌握关系的三类完整性约束的概念。

## 实际的数据库系统支持的主要数据模型，基本层次联系，层次模型、网状模型的数据结构

- 实际的数据库系统支持的主要数据模型包括关系模型、层次模型、网状模型和对象模型等。
- 数据模型的基本层次联系是实体之间的联系，例如父子关系、包含关系等。
- 层次模型
  - ![层次模型](https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Hierarchical_Model.jpg/320px-Hierarchical_Model.jpg)
  - 层次模型是一种树状结构的数据模型，**数据之间的关系是父子关系**，每个父节点可以有多个子节点，但每个子节点只能有一个父节点。层次模型的优点是可以快速地查找某个子节点，但是它的缺点是数据之间的联系比较简单，不能很好地描述复杂的关系。
- 网状模型
  - ![网状模型](https://images2015.cnblogs.com/blog/809752/201610/809752-20161029143545843-1008074030.png)
  - 网状模型是一种网络结构的数据模型，**数据之间的关系是多对多的关系**，每个实体可以与多个实体相连，每个实体之间的关系都可以用关系型数据库中的“外键”来描述。网状模型的优点是可以描述复杂的关系，但它的缺点是数据之间的联系比较复杂，不易维护。

## 关系的定义及关系的特性，关系模式的表示，元组、属性、主属性、码、候选码、非码属性、全码、外码的概念

- 关系是数据库中最基本的数据组织方式，它是**由多个属性组成的二维表格**。每一行代表一个元组，每一列代表一个属性。关系具有以下特性：

1. 去重性：关系中的每一个元组都是唯一的。
2. 无序性：关系中的元组是无序的，即任意两个元组的位置是没有关系的。
3. 原子性：关系中的属性是不可再分的，即不能将一个属性再分成更小的部分。

- 关系模式的表示：假设学生信息表的关系模式表示为 S（姓名，性别，年龄，学号，班级），其中 S 是关系名称，括号内的内容是属性列表。
- 元组：一个元组代表关系中的一行，例如（"小明"，"男"，18，"20190001"，"计算机科学与技术1班"）。
- 属性：关系中的每一列都是一个属性，例如学生信息表中的学号、姓名、性别等。
- 主属性：能够唯一标识元组的属性称为主属性，例如学生信息表中的学号。
- 码：能够唯一标识元组的**属性或属性集合**称为码，例如学生信息表中的学号或者学号和班级的组合。
- 候选码：**能够唯一标识元组的属性集合**称为候选码，例如学生信息表中的学号或者学号和班级的组合都是候选码。
- 非码属性：**不包含在任何候选码中的属性**称为非码属性，例如学生信息表中的年龄、姓名、性别等都是非码属性。
- 全码：在关系模型中，全码指的是可以唯一标识一个元组的**属性集合**。在学生信息表中，如果学号和班级的组合可以唯一标识每一个学生的信息，那么这个组合就是全码。这也意味着，如果你去掉其中任何一个属性，就无法唯一标识每个学生的信息，所以它们的组合被认为是一个全码。
- 外码：在一个关系中引用另一个关系的主键称为外键，包含外键的属性称为外码，例如学生信息表中的班级属性是外码，因为它引用了班级信息表中的主键。

- 全码和候选码的关系
  - 全码和候选码都是可以**唯一标识一个关系中的元组的最小属性集合**。一个关系可能有多个候选码，但只能有一个全码。候选码是在所有可能的码中被选择为代表该关系的标识符的属性集合，而**全码是从候选码中选择的一个**。
  - 例如，对于一个学生信息表，学生ID和学生身份证号都可以唯一标识一个学生，它们都是候选码。但是，身份证号可能发生变化，因此**学生ID被选为全码作为唯一标识一个学生的属性集合**。

- UPUP!![20230404113626](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230404113626.png)

## ⭐关系模型的三个组成部分及各部分所包括的主要内容

- 术语
  - ![20230402162802](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230402162802.png)

### 关系模型的数据结构

- 关系模型的数据结构非常简单，只包含**单一的数据结构——关系**。在用户看来，关系模型中数据的逻辑结构是一张扁平的二维表。
- 每个关系的数据结构是**一张规范化的二维表**
  - ![20230402163127](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230402163127.png)

### 关系模型的数据操纵

- 关系模型的数据操纵主要包括查询、插入删除和更新数据。这些操作必须满足关系的完整性约束条件。
- 关系模型提供了一系列对数据进行操作的操作符，包括**4⭐选择、投影、连接、除、并、差等**。这些操作符可以帮助用户从数据库中检索所需的数据，或者进行数据的添加、删除、更新等操作

- 选择（SELECT）：用于从表中选择符合指定条件的行。
  - 示例：`SELECT * FROM table_name WHERE condition`;
- 投影（PROJECT）：用于从表中选择指定列。
  - 示例：`SELECT column1, column2 FROM table_name`;
- 连接（JOIN）：用于将两个或多个表中的行按照指定的关联条件组合在一起。
  - 示例：`SELECT * FROM table1 JOIN table2 ON condition`;
- 除（EXCEPT）：用于从一个表中删除另一个表中也包含的行。
  - 示例：`SELECT * FROM table1 EXCEPT SELECT * FROM table2`;
- 并（UNION）：用于将两个或多个表中的行合并在一起。
  - 示例：`SELECT * FROM table1 UNION SELECT * FROM table2`;
- 差（MINUS）：用于从一个表中删除另一个表中也包含的行，但不同于EXCEPT的是，该操作只保留第一个表中的数据。
  - 示例：`SELECT * FROM table1 MINUS SELECT * FROM table2`;

### 完整性约束

- 关系的完整性约束条件包括三大类:实体完整性、参照完整性和用户定义的完整性。

- 实体完整性指的是**每个实体都必须有一个主键**，并且主键的取值不能为空；
- 参照完整性指的是如果一个表中的一个属性**引用了另一个表中的主键**，那么该属性的取值必须等于被引用表中**某个主键的取值**，或者为**空**；
- 用户定义完整性指的是用户可以**定义自己的完整性规则**，保证数据的完整性和一致性。
  - 例如，在例 2.1 的学生关系中，若按照应用的要求学生不能没有姓名，则可以定义学生姓名不能取空值;
  - 某个属性(如学生的成绩)，的取值范围可以定义在 0~100之间等。

### 笛卡尔积

<image style="width:450px; background-color:#CDDEC2" src="https://raw.githubusercontent.com/Logible/Image/main/note_image/20230402165232.png
"/>

## 关系代数的运算：传统的集合运算（并、交、差、笛卡儿积）

给出易懂的定义, 并以学生表课程二维表, 给出例子

- ![20230403150234](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230403150234.png)

## 专门的关系运算（选择、投影、连接、除法）

can u give a real example again? use the form to explain the选择、投影、连接、除法

- 选择投影<image style="width:450px; background-color:#CDDEC2" src="https://raw.githubusercontent.com/Logible/Image/main/note_image/20230403120007.png"/>
- 连接![20230403153335](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230403153335.png)
