# 结构体

- [结构体](#结构体)
  - [8.2结构体的声明和结构体变量定义](#82结构体的声明和结构体变量定义)
    - [8.2.1 结构体的声明](#821-结构体的声明)
    - [8.2.2 结构体变量的声明](#822-结构体变量的声明)
    - [8.2.3 结构体成员的引用\&初始化](#823-结构体成员的引用初始化)
    - [8.2.4 结构体变量的赋值](#824-结构体变量的赋值)
  - [8.3 结构体数组和结构体指针](#83-结构体数组和结构体指针)
    - [8.3.1 结构体数组的定义和数组元素的引用](#831-结构体数组的定义和数组元素的引用)
    - [8.3.2 结构体数组元素的赋值及引用](#832-结构体数组元素的赋值及引用)
    - [8.3.3 指向结构体变量的指针](#833-指向结构体变量的指针)
  - [8.5 链表及其应用](#85-链表及其应用)
    - [8.5.1 链表结点的定义](#851-链表结点的定义)
  - [8.6 共用体](#86-共用体)
    - [8.6.1 共用体的定义](#861-共用体的定义)
    - [8.6.2 共用体变量的引用](#862-共用体变量的引用)
  - [8.7 枚举类型和自定义类型](#87-枚举类型和自定义类型)
    - [8.7.1 枚举类型的定义和枚举变量的说明](#871-枚举类型的定义和枚举变量的说明)
    - [8.7.2 枚举类型变量的赋值和使用](#872-枚举类型变量的赋值和使用)
  - [8.8 类型定义符typedef](#88-类型定义符typedef)
  - [习题](#习题)
    - [选择题](#选择题)
    - [填空题](#填空题)
    - [结果题](#结果题)

## 8.2结构体的声明和结构体变量定义

### 8.2.1 结构体的声明

```c
struct 结构体名
{
    成员项表列
};
```

### 8.2.2 结构体变量的声明

1. 先定义结构体类型，再定义结构体变量

    ```c
    struct student
    {
        char name[20];
        char sex;
        long num;
        float score[3]; //3科考试成绩
    };
    //定义结构体变量
    struct studnet stu1, stu2;
    ```

2. 定义结构体类型同时定义结构体变量

    ```c
    struct student
    {
        char name[20];
        char sex;
        long num;
        float score[3]; //3科考试成绩
    } stu1, stu2;
    ```

3. 通过定义无名结构体类型来定义结构体变量

    ```c
    struct
    {
        char name[20];
        char sex;
        long num;
        float score[3]; //3科考试成绩
    } stu1, stu2;
    ```

   - 由于该定义方法**无法记录该结构体类型**，所以除直接定义外，不能再定义该结构体的其他变量。这样的定义，使得程序的扩展性受到很大的限制，建议少用这种方式定义结构体变量。

### 8.2.3 结构体成员的引用&初始化

```c
struct student
{
    char name[20];
    char sex;
    long num;
    float score[3]; //3科考试成绩
} stu1, stu2;

struct student stu ={"Wangyi",'F',1308001,98.5,97.0,95.0};
cout<<stu.name;
```

### 8.2.4 结构体变量的赋值

```c
st1 = st2;
```

可以将一个结构体变量赋值给另一个同类型的结构体变量

## 8.3 结构体数组和结构体指针

### 8.3.1 结构体数组的定义和数组元素的引用

```c
struet student{
    char name[20];
    long num;
    float score[3];
};
struct student stu[30];/*定义了一个班级同学的信息*/
```

### 8.3.2 结构体数组元素的赋值及引用

```c
stu[0].name,stu[0].num,stu[0].score[i];
```

### 8.3.3 指向结构体变量的指针

- 若定义指针变量为**指向结构体变量**，则可以通过指针来引用结构体变量
- C语言还提供了一个利用指针形式**间接访问成员域的运算符**，这个间接成员域访问运算符用`->`来表示。

```c
struct student *p=&stu;
cout<<p->name<<endl; //log
cout<<(*p).name<<endl; //log
```

## 8.5 链表及其应用

### 8.5.1 链表结点的定义

- 可以选择在保留字struct之后包含一个**指向结构体自身**的指针成员
- 这是在C语言中**唯一**规定可以**先使用后定义**的数据结构。

```c
struct Node{
    char name[20];
    long num;
    char sex;
    struct Node * next;
}
```

## 8.6 共用体

### 8.6.1 共用体的定义

- 一个共用体变量的所有成员共享同一片存储区。因此一个共用体变量在每个时刻里只能保存它的某一个成员的值。

```c
union 共用体名{
    成员表列;
}
```

### 8.6.2 共用体变量的引用

- 可以引用共用体变量的成员，其用法**与结构体完全相同**。
  - 但由于共用体各成员共用**同一段内存空间**，使用时，根据需要使用其中的某一个成员

## 8.7 枚举类型和自定义类型

### 8.7.1 枚举类型的定义和枚举变量的说明

- 如同结构体和共用体一样，枚举变量也可用不同的方式说明，即先定义后说明，同时定义说明或直接说明。

```c
//先定义后说明
enum Weekday{sun,mon,tue,wed,thu,fri,sat};
enum Weekday a,b,c;
//同时定义说明
enum Weekday{sun,mon,tue,wed,thu,fri,sat}a,b,c;
//直接说明
enum {sun,mon,tue,wed,thu,fri,sat}a,b,c;
```

### 8.7.2 枚举类型变量的赋值和使用

- 枚举元素本身由系统定义了一个**表示序号的数值**，从0开始顺序定义为0,1,2,…。如在Weekday中，sun值为0,mon值为1,……,sat值为6。
- 只能把**枚举值**赋予枚举变量，不能把元素的数值直接赋予枚举变量
  - 枚举元素不是字符常量也不是字符串常量，使用时**不要加单、双引号**。

```c
enum Weekday {sun,mon,tue,wed,thu,fri,sat} a,b,c;

int main() {
    a = sun;
    b = mon;
    c = (enum Weekday)2;
    cout<<a<<endl;  //0
    cout<<b<<endl;  //1
    cout<<c<<endl;  //2
}
```

## 8.8 类型定义符typedef

- C语言允许由用户自己定义类型说明符，也就是说允许由用户**为数据类型取别名**

```c
typedef int INTEGER;
INTEGER a,b;

typedef char NAME[20];
NAME a1,a2,s1,s2;
//完全等效于
char a1[20],a2[20],s1[20],s2[20];
```

```c
typedef struct stu{
    char name[20];
    int age;
    char sex;
}STU;
STU body1,body2;
```

- 有时也可用宏定义来代替typedef的功能

```c
#define MY_TYPE int
```

## 习题

### 选择题

⭐

- 01![20230317211117](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230317211117.png)
- 03![20230317211206](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230317211206.png)
  - union
- 07错误![20230317211939](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230317211939.png)
- 07![20230317212135](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230317212135.png)
  - `->`,`.`优先级最高

### 填空题

⭐⭐

- 01![20230318194334](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230318194334.png)
  - 💚成员域**访问**运算符
  - 💚成员域间接访问运算符

⭐

- 02![20230318194539](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230318194539.png)
  - `->`具有最高优先级
- 05![20230318194840](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230318194840.png)
  - 💚指针也可+并用于判断`p<people+3`

### 结果题

⭐

- 01![20230318200133](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230318200133.png)
  - 💚C语言参数自右向左结合
- 03![20230318201640](https://raw.githubusercontent.com/Logible/Image/main/note_image/20230318201640.png)
  - 💚有个点
