# OpenHD

- [OpenHD](#openhd)
  - [什么是STM32](#什么是stm32)
  - [什么是单片机](#什么是单片机)
  - [什么是嵌入式图像处理](#什么是嵌入式图像处理)
  - [什么是OpenHD](#什么是openhd)
  - [选择OpenHD的原因](#选择openhd的原因)
  - [项目流程](#项目流程)
    - [遇到的问题](#遇到的问题)
  - [名词解释](#名词解释)

## 什么是STM32

- 什么是STM32从字面上来理解，ST 是意法半导体，M 是Microelectronics/ˌmaɪkrəʊɪlekˈtrɒnɪks/ 的缩写，32 表示32 位

一个32位单片机

- 32
  - 32位单片机的32位指的是**数据总线宽度和CPU指令集**的位数都是32位，这使得32位单片机具有更高的性能和处理能力。
  - 具体来说，32位单片机的**数据总线宽度**为32位，表示可以同时传输32位的二进制数据。这意味着32位单片机可以更快地处理数据，并且可以同时处理更多的数据。
  - 同时，32位单片机的**CPU指令集**也是32位的，意味着单个CPU指令可以处理32位的数据。这使得32位单片机能够更快地执行指令，提高系统的响应速度和处理能力。

## 什么是单片机

- 全称**单片微型计算机**（英语：single-chip microcomputer），又称微控制器单元（microcontroller unit），是把CPU、存储器、定时/计数器（timer/counter）、各种输入输出接口等都集成在一块**集成电路芯片上**的微型计算机。

## 什么是嵌入式图像处理

- 嵌入式图像处理是指在**嵌入式系统中**使用**图像处理技术**来实现各种应用程序。
- 嵌入式系统是指**嵌入到其他设备或系统中**的计算机系统，它们通常有限制的资源，例如处理器速度、内存容量和存储空间。
  - 这些系统的目标是提供特定的功能和任务，例如自动控制、传感和数据采集、通信和信息处理等。

## 什么是OpenHD

- OpenHD
  - high-definition(英 /ˌhaɪ ˌdefɪˈnɪʃn)
  - 一个开源高清图传

- OpenHD
  - 通过**一般的无线网卡**作为无线电的发射与接受
    - 无线电
      - 无线电是一种利用**无线电波**进行通信的技术。
        - 无线电波是电磁波的一种，具有一定的频率和波长，可以通过空气、水、金属等媒介传播。
  - 通过**载体树莓派**实现**高清图像**的实时传输
  - 同时集成了OSD功能(on-screen display)、热点功能、支持HDMI显示器、手机、电脑作为终端
  - 支持多种无人机协议，支持**发送和接受遥测、音频和各种控制数据**，还配备有齐全的软件app
    - OpenHD安卓版软件, 连上接收端热点便可在手机上显示

- OpenHD是一个开源高清图传
  - 通过**一般的无线网卡**作为无线电的发射与接受
  - 通过**载体树莓派**实现**高清图像**的实时传输
  - 同时集成了
    - OSD功能(on-screen display)、热点功能、支持HDMI显示器、手机、电脑作为终端
  - 并且支持多种无人机协议，支持**发送和接受遥测、音频**和各种控制数据.

## 选择OpenHD的原因

- OpenHD具有开源性,可以**自由使用、修改和定制代码** 支持**高清图传**和**远距离传输**,最重要的一点是价格便宜, 我组的一套共只需要800多块, 淘宝上一件图传要1到2千

- 开源性：OpenHD是一种开源系统，用户可以**自由使用、修改和定制代码**，非常灵活。
- 高清传输：OpenHD**支持高清图传**，能够提供更高的图像质量和清晰度。
- 远距离传输：OpenHD**支持远距离传输**，可以在比较大的范围内实现高质量的视频传输。
  - 以上三点符合项目的需求
- 最重要的一点是价格便宜, 本人组的一套共只需要800多块, 淘宝上一件图传要1到2千

## 项目流程

- 购买了三个TL(系列)-WN722n网卡, 选择树莓派4b作为接收端, 树莓派zero作为发送端, 然后进行镜像刷写, 硬件连接和通电测试

- 图传材料准备

1. 网卡
   - 3个TL(系列)-WN722n网卡
     - 接受端用两个保证带宽
   - 官方推荐
2. 树莓派
   - 接受端
     - 树莓派4B
       - 选择原因
         - 实验室有现成的4B硬件
   - 发送端
      - 树莓派摄像头
      - 树莓派zero
        - 选择原因
          - 体积小巧,且传输性能够用

- 镜像刷写
   1. 将OpenHD固件刷写到SD卡
- 硬件连接
   1. 照着网上经验贴连接硬件
- 通电测试
   1. 给**发送端和接收端都刷好固件后**开始上电测试

### 遇到的问题

将所有步骤完成后, **通电时没有图像**, 因为屏幕上**有菜单**, 所以**先排除软件问题**, 而且网卡信号灯亮, 说明网卡连接成功, 排除网卡问题. 依次检查硬件, 我在树莓派zero上**刷写linux系统后开启摄像头**, 观察到有图像, 排除摄像头问题, 最后在换了**读卡器刷写SD卡**后, 成功出现图像

- 将所有步骤完成后, **通电时没有图像**

- 解决方法
  - 因为屏幕上**有菜单**, 所以**先排除软件问题**
  - 网卡信号灯亮, 排除网卡问题
  - 依次检查硬件
    - 摄像头和屏幕
      - 在树莓派zero上刷写linux系统后开启摄像头, 观察到有图像, 排除摄像头问题
    - SD卡
      - 换了**读卡器刷写SD卡**后, 成功出现图像
- 经在学校内测试, 图传可以在**无障碍情况下, 稳定传输2~3公里**

## 名词解释

- 遥测（Telemetry）指的是通过无线电、电缆、光纤等技术手段远程传输、监测和控制物理量的一种技术。
  - 在无人机领域中，遥测通常指通过**无线电通信技术**，实现对飞行器的状态、姿态、位置、传感器**数据**等信息的**实时监测和传输**

- 网卡
  - 网卡是工**作在第二层链路层的网络组件**，是局域网中连接计算机和传输介质的接口，不仅能实现与局域网传输介质之间的物理连接和电信号匹配，还涉及帧的发送与接收、帧的封装与拆封、介质访问控制、数据的编码与解码以及数据缓存的功能等。

- 树莓派
  - 树莓派（Raspberry Pi）是一款基于ARM处理器的**单板计算机**

- ARM处理器
  - ARM处理器是一种低功耗、高性能的芯片，常用于移动设备、嵌入式系统和智能家居等领域。ARM处理器最初由英国公司ARM（Advanced RISC Machines）开发，现已成为全球领先的处理器架构之一。

- 单板计算机（Single Board Computer，SBC）
  - 是一种**完整的计算机系统**，整个系统的核心部件都集成在一个板子上。通常它包括中央处理器（CPU）、内存、存储、输入输出接口、网络接口等基本组成部分。

- "镜像刷写"（jìng xiàng shuā xiě）
  - 是指将镜像**写入或复制到设备上**的过程。在**安装或恢复操作系统**或其他软件到计算机或其他设备上时，通常会使用这个过程。
