# String对象

## 1.概述

$\color{#ea4335}{String}$对象是JavaScript原生提供的三个包装对象之一,用来生成字符串对象

$\color{#ea4335}{String}$对象作为工具方法使用时，将任意类型的值转为字符串

```js
var s1 = 'abc';
var s2 = new String('abc');

typeof s1 // "string"
typeof s2 // "object"

s2.valueOf() // "abc"
```

上述代码中,变量$\color{#ea4335}{s1}$是字符串,$\color{#ea4335}{s2}$是对象.由于$\color{#ea4335}{s2}$是字符串对象,$\color{#ea4335}{s2.valueOf}$方法返回的就是它所对应的原始字符串

字符串对象是一个类似数组的对象,有

- 数值键(0、1、2)
- length属性

所以可像数组那样取值

```js
new String('abc')
// String {0: "a", 1: "b", 2: "c", length: 3}

(new String('abc'))[1] // "b"
```

## 2.静态方法

### 2.1 String.fromCharCode()

$\color{#ea4335}{String}$对象提供的静态方法,主要是$\color{#ea4335}{String.fromCharCode()}$,此方法的参数是一个或多个数组,代表Unicode码点,返回值是这些码点组成的字符串

```js
String.fromCharCode() // ""
String.fromCharCode(97) // "a"
String.fromCharCode(104, 101, 108, 108, 111)
// "hello"
```

$\color{#fbbc05}{Tips:}$

该方法不支持Unicode大于$\color{#fbbc05}{0xFFFF}$的字符,即传入的参数不能大于0xFFFF(即十进制的65535)

```JS
String.fromCharCode(0x20BB7)
// "ஷ"
String.fromCharCode(0x20BB7) === String.fromCharCode(0x0BB7)
// true
```

当$\color{#ea4335}{String.formCharCode}$发现参数值大于$\color{#ea4335}{0xFFFF}$,就会忽略多出的位(即忽略$\color{#ea4335}{0x20BB7}$的$\color{#ea4335}{2}$)

这种现在的根本原因在于(见数据类型-字符串)

码点大于($\color{#ea4335}{0xFFFF}$)的字符占用四个字节,而JavaScript默认支持两个字节的字符.这种情况下,必须把$\color{#ea4335}{0x20BB7}$拆成两个字符表示.

```js
String.fromCharCode(0xD842, 0xDFB7)
// "𠮷"
```

## 3.实例属性

### 3.1 String.prototype.length

字符串实例的$\color{#ea4335}{length}$属性返回字符串的长度

## 4.实例方法

### 4.1 String.protptype.chatAt()

$\color{#ea4335}{CharAt}$方法返回指定位置的字符,可以用数组下标替代,若参数为负数,或大于等于字符串的长度,$\color{#ea4335}{chatAt}$返回空字符串

```js
var s = new String('abc');

s.charAt(1) // "b"
s.charAt(s.length - 1) // "c"

'abc'.charAt(1) // "b"
'abc'[1] // "b"

'abc'.charAt(-1) // ""
'abc'.charAt(3) // ""
```

### 4.2 String.prototype.charCodeAt()

$\color{#ea4335}{charCodeAt()}$方法返回字符串指定位置的Unicode码点(十进制表示),相当于$\color{#ea4335}{String.formcharCode()}$的逆操作

- 如果没有任何参数,$\color{#ea4335}{charCodeAt}$返回首字符的Unicode码点
- 如果参数为负数,或大于等于字符串的长度,返回$\color{#ea4335}{NaN}$

```js
'abc'.charCodeAt(1) // 98

'abc'.charCodeAt() // 97


'abc'.charCodeAt(-1) // NaN
'abc'.charCodeAt(4) // NaN
```

$\color{#fbbc05}{Tips:}$

$\color{#ea4335}{charCodeAt}$方法返回的Unicode码点不会大于65535(0xFFFF),也就是说,只返回两个字节的字符的码点

如果遇到码点大于65535的字符(四个字节的字符),必须连续使用两次$\color{#ea4335}{charCodeAt}$,才可得到准确的字符

```js
console.log('𠮷'.charCodeAt(0).toString(16),'𠮷'.charCodeAt(1).toString(16));
//D842 DFB7
```
