# 模板

- 解压图片
  - ffmpeg -i ⭐.mp4 -vf "select=not(mod(n\,1))" -vsync 0 ⭐/%05d.png
  - ffmpeg -i ⭐.mp4 -start_number ⭐ -vf "select=between(n\,⭐\,⭐)" -vsync 0 ./%05d.png

- 抠图
  - python main.py --img_dir ⭐ --out_dir ⭐ --color cg --bg ⭐ --multi_process 20 --mask_th ⭐
- 阈值抠图
  - python main.py --img_dir ⭐ --out_dir ⭐ --color g --multi_process 5 --upper ⭐ --lower ⭐ 

- 合成视频
  - python get_seg_video3.py ---path ⭐/ --video_file ⭐.mp4 --start_id 1 --end_id -1

- 删除文件
  - rm -rf ./⭐/

- 切换

cd /data/log/bg-segment
conda activate myenv

## 1110

ffmpeg -i /data/log/1110/陈/chen_1.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1110/陈/chen_1/%05d.png
ffmpeg -i /data/log/1110/陈/chen_2.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1110/陈/chen_2/%05d.png

python main.py --img_dir /data/log/1110/陈/chen_1/ --out_dir /data/log/1110/陈/chen_1_mask100/ --color cg --bg /data/log/1110/陈/c.png --multi_process 20 --mask_th 100
python main.py --img_dir /data/log/1110/陈/chen_2/ --out_dir /data/log/1110/陈/chen_2_mask100/ --color cg --bg /data/log/1110/陈/c.png --multi_process 5 --mask_th 100

python get_seg_video3.py ---path /data/log/1110/陈/chen_1_mask100/ --video_file /data/log/1110/陈/chen_1_mask100.mp4 --start_id 1 --end_id 1000
python get_seg_video3.py ---path /data/log/1110/陈/chen_2_mask100/ --video_file /data/log/1110/陈/chen_2_mask100.mp4 --start_id 1 --end_id -1

--- 

ffmpeg -i /data/log/1110/金可/jk_1.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1110/金可/jk_1/%05d.png
ffmpeg -i /data/log/1110/金可/jk_2.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1110/金可/jk_2/%05d.png

python main.py --img_dir /data/log/1110/金可/jk_1/ --out_dir /data/log/1110/金可/jk_1_mask100 --color cg --bg /data/log/1110/金可/jk.png --multi_process 12 --mask_th 100
python main.py --img_dir /data/log/1110/金可/jk_2/ --out_dir /data/log/1110/金可/jk_2_mask100 --color cg --bg /data/log/1110/金可/jk.png --multi_process 20 --mask_th 100

python get_seg_video3.py ---path /data/log/1110/金可/jk_1_mask100 --video_file /data/log/1110/金可/jk_1_mask100.mp4 --start_id 1 --end_id 1500
python get_seg_video3.py ---path /data/log/1110/金可/jk_2_thres/ --video_file /data/log/1110/金可/jk_2_thres.mp4 --start_id 1 --end_id 700

## 1113

python main.py --img_dir /data/log/1110/金可/jk_1/ --out_dir /data/log/1110/金可/jk_1_threshold --color g --multi_process 5 --upper 120,255,229 --lower 43,93,2

--img_dir G:\Video_Dispose\1110\jk\jk_1_ori --out_dir ../outs --color g --multi_process 0  --upper 135,255,229 --lower 43,172,1 --bg G:\Video_Dispose\1110\jk\jk.png

--img_dir G:\Video_Dispose\1110\jk\jk_2_ori --out_dir ./outs --color g --multi_process 0  --upper 70,221,230 --lower 42,170,74 --bg G:\Video_Dispose\1110\jk\jk.png

--img_dir G:\Video_Dispose\1110\jk\jk_2_ori --out_dir ./outs --color g --multi_process 0  --upper 70,255,230 --lower 42,170,59 --bg G:\Video_Dispose\1110\jk\jk.png


- 越小，扣的越少（绿色越多

python main.py --img_dir /data/log/1110/金可/jk_2/ --out_dir /data/log/1110/金可/jk_2_mask0new --color cg --bg /data/log/1110/金可/jk_new.png --multi_process 20 --mask_th 0

python main.py --img_dir /data/log/1110/金可/jk_1/ --out_dir /data/log/1110/金可/jk_1_threshold2 --color g --multi_process 5 --bg /data/log/1110/金可/jk.png --upper 135,255,229 --lower 43,172,1

python main.py --img_dir /data/log/1110/金可/jk_2/ --out_dir /data/log/1110/金可/jk_2_thres --color g --multi_process 20  --upper 70,255,230 --lower 42,170,59 --bg /data/log/1110/金可/jk.png

## 1113

1. ffmpeg -i /data/log/1113/tingting.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1113/tingting/%05d.png
2. python main.py --img_dir /data/log/1113/tingting/ --out_dir /data/log/1113/tingting_dis --color cg --bg /data/log/1113/ting.png  --multi_process 20 --mask_th 100

## 1114

python get_seg_video3.py ---path /data/log/1110/金可/jk_1_threshold2/ --video_file /data/log/1110/金可/jk_1_threshold2.mp4 --start_id 1 --end_id -1

mkdir FengYang1 FengYang2 FengYang3

ffmpeg -i /data/log/1114/FengYang1.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1114/FengYang1/%05d.png
ffmpeg -i /data/log/1114/FengYang2.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1114/FengYang2/%05d.png
ffmpeg -i /data/log/1114/FengYang3.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1114/FengYang3/%05d.png

python main.py --img_dir /data/log/1114/FengYang1/ --out_dir /data/log/1114/FengYang1_100/ --color cg --bg /data/log/1114/FengYangPic.png --multi_process 6 --mask_th 100
python main.py --img_dir /data/log/1114/FengYang2/ --out_dir /data/log/1114/FengYang1_200/ --color cg --bg /data/log/1114/FengYangPic.png --multi_process 6 --mask_th 100
python main.py --img_dir /data/log/1114/FengYang3/ --out_dir /data/log/1114/FengYang1_300/ --color cg --bg /data/log/1114/FengYangPic.png --multi_process 6 --mask_th 100

---

ffmpeg -i /data/log/1114/XiaoMeng.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1114/XiaoMeng/%05d.png

python main.py --img_dir /data/log/1114/XiaoMeng/ --out_dir /data/log/1114/XiaoMeng_100/ --color cg --bg /data/log/1114/XiaoMengPic.png --multi_process 25 --mask_th 100

---

ffmpeg -i /data/log/1114/jk_2.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1114/jk_2/%05d.png

python main.py --img_dir /data/log/1114/jk_2/ --out_dir /data/log/1114/jk_2_thres_oc --color g --multi_process 30  --upper 70,255,230 --lower 42,170,59 --bg /data/log/1114/jk.png

rm -rf ./FengYang1/*
rm -rf ./FengYang2/*
rm -rf ./FengYang3/*
rm -rf ./FengYang1/*

10621-12694
624-2485
3761-5566

ffmpeg -i /data/log/1114/FengYang1.mp4 -start_number 10621 -vf "select=between(n\,10621\,12694)" -vsync 0 /data/log/1114/FengYang1/%05d.png
ffmpeg -i /data/log/1114/FengYang2.mp4 -start_number 624 -vf "select=between(n\,624\,2485)" -vsync 0 /data/log/1114/FengYang2/%05d.png
ffmpeg -i /data/log/1114/FengYang3.mp4 -start_number 3761 -vf "select=between(n\,3761\,5566)" -vsync 0 /data/log/1114/FengYang3/%05d.png

python main.py --img_dir /data/log/1114/FengYang1/ --out_dir /data/log/1114/FengYang1_100/ --color cg --bg /data/log/1114/FengYangPic.png --multi_process 6 --mask_th 100
python main.py --img_dir /data/log/1114/FengYang2/ --out_dir /data/log/1114/FengYang2_100/ --color cg --bg /data/log/1114/FengYangPic.png --multi_process 6 --mask_th 100
python main.py --img_dir /data/log/1114/FengYang3/ --out_dir /data/log/1114/FengYang3_100/ --color cg --bg /data/log/1114/FengYangPic.png --multi_process 6 --mask_th 100

python get_seg_video3.py ---path /data/log/1114/FengYang1_100/ --video_file /data/log/1114/FengYang1_100.mp4 --start_id 1 --end_id -1
python get_seg_video3.py ---path /data/log/1114/FengYang2_100/ --video_file /data/log/1114/FengYang2_100.mp4 --start_id 1 --end_id -1
python get_seg_video3.py ---path /data/log/1114/FengYang3_100/ --video_file /data/log/1114/FengYang3_100.mp4 --start_id 1 --end_id -1

rm ./000{01..36}.png
rm ./00{624..635}.png

rm ./0{7323..7633}.png

python get_seg_video3.py ---path /data/log/1114/XiaoMeng_100/ --video_file /data/log/1114/XiaoMeng_100.mp4 --start_id 1 --end_id -1

## 1115

python get_seg_video3.py ---path /data/log/1114/jk_2_thres/ --video_file /data/log/1114/jk_2.mp4 --start_id 1 --end_id -1

python get_seg_video3.py ---path /data/log/1114/XiaoMeng_100/ --video_file /data/log/1114/XiaoMeng_100.mp4 --start_id 1 --end_id -1

## 1117

upper指高阈值，lower低阈值

- no3

--upper
48,229,246
--lower
44,172,143

- no4

--upper
48,222,252
--lower
44,164,178

## 1122

ffmpeg -i /data/log/1122/145457.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1122/145457/%05d.png

python main.py --img_dir /data/log/1122/145457 --out_dir /data/log/1122/145457_dis --color cg --bg /data/log/1122/pic.png --multi_process 20 --mask_th 150

python get_seg_video3.py ---path /data/log/1122/145457_dis/ --video_file /data/log/1122/145457_dis.mp4 --start_id 1 --end_id -1

## 1123

ffmpeg -i /data/log/1123/jk_1.mp4 -vf "select=not(mod(n\,1))" -vsync 0 /data/log/1123/jk_1/%05d.png

python main.py --img_dir /data/log/1123/jk_1/ --out_dir /data/log/1123/jk_1123/ --color cg --bg /data/log/1123/jk_bg.png --multi_process 20 --mask_th 150

python main.py --img_dir /data/log/1123/jk_1/ --out_dir /data/log/1123/jk_1123_g/ --color g --bg /data/log/1123/jk_bg.png --multi_process 20 --mask_th 150 --upper 50,255,246 --lower 43,135,81

## 1207

- ffmpeg -i G:\Video_Dispose\1207\v.mp4 -vf "select=not(mod(n\,1))" -vsync 0 G:\Video_Dispose\1207\img\%05d.png

--img_dir
G:\Video_Dispose\1207\img
--out_dir
G:\Video_Dispose\1207\img_dis
--color
g
--multi_process
0
--upper
73,255,172
--lower
63,114,50